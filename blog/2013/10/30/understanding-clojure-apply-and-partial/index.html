<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <link href="http://gmpg.org/xfn/11" rel="profile">

  <title>
    Understanding Clojure apply and partial &middot; 
    my blog at github.io
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:300,400italic,400,600,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.png">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">


  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-26676810-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
</head>


  <body>

    <header class="masthead">
      <div class="masthead-inner">
        <h1><a href="/">Paulo Suzart</a></h1>
        <p>Functional programming (mostly with clojure), virtualization and cloud computing.</p>

        <div class="colophon">
          <ul class="colophon-links">
            <li>
              <a href="https://twitter.com/paulosuzart">@paulosuzart</a>,
            </li>
            <li>
              <a href="https://github.com/paulosuzart">Codes</a>,
            </li>
            <li>
              CTO at <a href="http://www.guiato.com.br" target="_new">Guiato S.A.</a>
            </li>

          </ul>
        </div>
      </div>
    </header>

    <div class="content container">
      <div class="post">
  <h1>Understanding Clojure apply and partial</h1>
  <span class="post-date">30 Oct 2013</span>
  <p>Hi guys, a really introductory post on <a href="http://clojure.org">Clojure</a> <code>apply</code> and <code>partial</code>functions. I need to confess that I didn't take a look around to see how people are usually explaining these functions. For sure there are better ways to explain it even usingJavascript, but remember: it was used to teach a beginne, so no purism here.</p>

<p>Anyway. These sample <code>js</code> codes come from the explanation I gave to a colleague at work. And pretty much worked to illustrate both cases.</p>

<h1>Apply</h1>

<p>To a beginner it might be not that easy to imagine how they will find room for using <code>apply</code>. They think it will take millon years until it become useful. Wrong!</p>

<p>After listening to some "newbysh" considerations I came across te following code in Java Script, a well known language:</p>

<pre><code class="javascript">// Imagine a function returning this
var pessoa = [21, "paulo", "red"];

// And you have the following function to user
var printer = function(age, name, color) {
    console.log("Person with name " + name + " and age " + age + " and cor " + color);
};

// You'll probably do this
printer(pessoa[0], pessoa[1], "vermelho");
// =&gt; Person with name paulo and age 21 and cor red
// But imagine you could do this:
apply(printer, pessoa);

// This would be possible using the following apply function

var apply = function(fn, args) {
  var str = "fn(";
  for (x = 0; x &lt; args.length; x++)  {
    str = str + "args["+x+"]";
    if (x &lt; args.length - 1) {
      str += ",";
    }
  }

  str += ");";
  console.log(str);
  eval(str);
};

// And the output is the same:
// =&gt; Person with name paulo and age 21 and cor red
</code></pre>

<p>After reading this snippet. He instantaneously understood everything and how helpful <code>apply</code> is. Wrapping up, ...</p>

<blockquote><h2>... I told him:</h2>

<p>Use apply for variadic functions. Functions you don't know how many arguments it can take and you want to consider each element in a vector as if they were independent arguments. Or, even if you know how many args this function takes, for many times you'll have vectors with values that matches arguments of a function.</p></blockquote>

<p>For the second case it is easier to use <a href="http://clojure.org/special_forms#Special%20Forms--Binding%20Forms%20(Destructuring">destructuring</a>), but it still applies.</p>

<h1>Partial</h1>

<p>Believe me, there are plenty ways to explain this. From the most scientific to the most simplistic. I would say below you are going to the a simplistic like explannation. But enough to bootstrap you with your clojure code.</p>

<pre><code class="javascript">var hello = function(saud, name) {
  console.log(saud + ", " + name);
};

hello("ola", "brunolandia");

var morning = function(nome) {
  hello("Bom dia", nome);
};

morning("Brunovisk");
</code></pre>

<p>After reading the snippet...</p>

<blockquote><h2>... he then came to an end:</h2>

<p>But Paulo, <code>morning</code> is just reducing the <code>hello</code> function surface, then exposing another function that takes one argument and forwards it to <code>hello</code>, plus passing a constant predefined argument.</p></blockquote>

<p><strong>YES</strong>. That is it! But the most important question was: when should I use it?</p>

<p><a href="http://blog.jayfields.com/2011/01/clojure-partial-and-comp.html">Partial functions</a> have a plenty use cases. To not make things "scientific" and keep then simple:</p>

<p>Imagine you are providing functions to someone else to query a database. You might create a base function that takes an enormous number arguments that actually assemble the queries. But you want to guarantee that certain fields/constraints/indexes are present on every query.</p>

<p>A good choice is to partially apply this base function with your prefixed well known safe arguments and then expose this produced function to your users.</p>

<p>There are much more use cases for partial functions. A good motivation is to make your code more legible and elegant. A good post on it was published by Christopher Maier <a href="http://christophermaier.name/blog/2011/07/07/writing-elegant-clojure-code-using-higher-order-functions">right here</a>.</p>

<p>Well, hope you liked the text and that it can help you faster understand things that may be left behind while studying it. See you!</p>

</div>

    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = "paulosuzartblog"; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/blog/2014/01/21/my-contribution-to-puppet-forge/">
            My Contribution to Puppet Forge
            <small>21 Jan 2014</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/blog/2013/12/15/puppet-good-pattern/">
            Puppet good pattern?
            <small>15 Dec 2013</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/blog/2013/09/20/ultrafast-web-development-with-perl-plus-bootstrap-plus-mongodb/">
            Ultrafast web development with Perl + Bootstrap + MongoDB
            <small>20 Sep 2013</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

    </div>

  </body>
</html>
