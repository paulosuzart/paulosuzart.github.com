<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Ultrafast web development with Perl + Bootstrap + MongoDB</title>
  <meta name="description" content="Few weeks ago I had to fix some perl scripts. Actually make some HTTP requests, etc.That was actually my first contact with the language. Never tried before!...">

  <!-- CSS files -->
  <link rel="stylesheet" href="http://localhost:4000/css/font-awesome.min.css">
  <link rel="stylesheet" href="http://localhost:4000/css/main.css">

  <link rel="canonical" href="http://localhost:4000/blog/2013/09/20/ultrafast-web-development-with-perl-plus-bootstrap-plus-mongodb/">
  <link rel="alternate" type="application/rss+xml" title="Paulo Suzart" href="http://localhost:4000/feed.xml" />

  <!-- Icons -->
  <!-- 16x16 -->
  <link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
  <!-- 32x32 -->
  <link rel="shortcut icon" href="http://localhost:4000/favicon.png">
</head>


<body>
  <div class="row">
    <div class="col s12 m3">
      <div class="table cover">
        

<div class="cover-card table-cell table-middle">
  
  <a href="http://localhost:4000/" class="author_name">Paulo Suzart</a>
  <span class="author_job">FP and more</span>
  <span class="author_bio mbm">back end developer | machine Learning professional wannabe</span>
  <nav class="nav">
    <ul class="nav-list">
      <li class="nav-item">
        <a href="http://localhost:4000/">home</a>
      </li>
       
        
          <li class="nav-item">
            <a href="http://localhost:4000/archive/">Archive</a>
          </li>
        
          
        
          <li class="nav-item">
            <a href="http://localhost:4000/categories/">Categories</a>
          </li>
        
          
        
          <li class="nav-item">
            <a href="http://localhost:4000/tags/">Tags</a>
          </li>
        
        
        
           
        
           
        
           
        
          
    </ul>
  </nav>
  <script type="text/javascript">
  // based on http://stackoverflow.com/a/10300743/280842
  function gen_mail_to_link(hs, subject) {
    var lhs,rhs;
    var p = hs.split('@');
    lhs = p[0];
    rhs = p[1];
    document.write("<a class=\"social-link-item\" target=\"_blank\" href=\"mailto");
    document.write(":" + lhs + "@");
    document.write(rhs + "?subject=" + subject + "\"><i class=\"fa fa-fw fa-envelope\"></i><\/a>");
  }
</script>
<div class="social-links">
  <ul>
    
    
    
    
    <li><a href="http://linkedin.com/in/https://www.linkedin.com/in/paulosuzart/" class="social-link-item" target="_blank"><i class="fa fa-fw fa-linkedin"></i></a></li>
    
    
    
    
    <li><a href="http://github.com/github.com/paulosuzart" class="social-link-item" target="_blank"><i class="fa fa-fw fa-github"></i></a></li>
    
    
    
    
    
    
    
    
    
    
    
    
    
  </ul>
</div>

</div>

      </div>
    </div>
    <div class="col s12 m9">
      <div class="post-listing">
        <a class="btn" href= "http://localhost:4000/" >
  Home
</a>



<div id="post">
  <header class="post-header">
    <h1 title="Ultrafast web development with Perl + Bootstrap + MongoDB">Ultrafast web development with Perl + Bootstrap + MongoDB</h1>
    <span class="post-meta">
      <span class="post-date">
        20 SEP 2013
      </span>
      •
      <span class="read-time" title="Estimated read time">
  
  
    4 mins read
  
</span>

    </span>

  </header>

  <article class="post-content">
    <p>Few weeks ago I had to fix some <a href="http://www.perl.org">perl</a> scripts. Actually make some HTTP requests, etc.</p>

<p>That was actually my first contact with the language. Never tried before! How can it be? Well, I ended up finding an amazing community and ecosystem (mostly covered by <a href="http://www.perl.org/cpan.html">CPAN</a>).</p>

<p>By ecosystem, I mean libs and tools out there. Couldn’t be different since it was created in 1987 (I was just a kid)!</p>

<p>So, I needed to develop something simple yet powerful enough to be further extended with new features. But the main requirement was: DO IT RIGHT NOW!
<!--more-->
Ok, I could have chosen <a href="http://www.grails.org">Grails</a> (my daily job), but know what? I even had time for JVM startup time. Same applies to anything on JVM, even clojure web stuff. I could also have chosen <a href="http://python.org/">python</a> with <a href="http://flask.pocoo.org/">Flask</a> and would be great. But what I was going to add to my toolset?</p>

<h1 id="enter-perl-dancer">Enter Perl Dancer</h1>

<p>After a quick research on the internet I found at least 3 trusted options:</p>

<ul>
  <li><a href="http://www.catalystframework.org/">Catalyst</a> - No, I wanted something simpler than that. Catalyst looks awesome, and I will try it at some point</li>
  <li><a href="http://mojolicio.us/">Mojolicious</a> - Nice option. Very simple. But few plugins available if compared to the one I picked up</li>
  <li><a href="http://perldancer.org">Dancer</a> - YES! It is super compact, and the community around it has created tons of great plugins: <a href="http://search.cpan.org/~ajct/Dancer-Plugin-Mongo-0.03/lib/Dancer/Plugin/Mongo.pm">Dancer::Plugin::Mongo</a>, <a href="http://search.cpan.org/~sukria/Dancer-Plugin-REST-0.07/lib/Dancer/Plugin/REST.pm">Dancer::Plugin::REST</a> and <a href="http://search.cpan.org/~dams/Dancer-Plugin-FlashMessage-0.314/lib/Dancer/Plugin/FlashMessage.pm">Dancer::Plugin::FlashMessage</a> just to mention a few.</li>
</ul>

<p>That is it, assemble plugins as you want and you are done.</p>

<p>Another nice point is the project folder structure created by Dancer. If you are used to frameworks like Grails and Django, you’ll like it. And not only that, Dancer comes by default with per-environment configuration (yaml) files, and a general config file where you configure, plugins, powerful templates, http filters, etc.</p>

<p>I can’t open that much of the code I wrote in few nights. But I can guarantee it was funny and quick to write. A simple Http request handler is:</p>

<figure class="highlight"><pre><code class="language-perl" data-lang="perl"><span></span><span class="n">get</span> <span class="s">&#39;/job/:wok_id&#39;</span> <span class="o">=&gt;</span> <span class="k">sub </span><span class="p">{</span>
  <span class="k">my</span> <span class="nv">$job</span> <span class="o">=</span> <span class="n">mconfigs</span><span class="o">-&gt;</span><span class="n">find_one</span><span class="p">({</span><span class="n">wok_id</span> <span class="o">=&gt;</span> <span class="n">params</span><span class="o">-&gt;</span><span class="p">{</span><span class="s">&#39;wok_id&#39;</span><span class="p">}});</span>
  <span class="n">template</span> <span class="s">&#39;jobs/edit.tt&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="n">job</span> <span class="o">=&gt;</span> <span class="nv">$job</span><span class="p">,</span>
    <span class="n">server_host</span> <span class="o">=&gt;</span> <span class="n">config</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">server</span><span class="p">},</span>
    <span class="n">server_port</span> <span class="o">=&gt;</span> <span class="n">config</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">port</span><span class="p">},</span>
  <span class="p">};</span>
<span class="p">};</span></code></pre></figure>

<p>It is simple like that. You call the <code>get</code> providing the request path (notice the <code>:wok_id</code> path variable) and then your perl routine that handles the request. <code>mconfigs</code> is a simple routine that wraps the access to a MongoDB collection and a query.</p>

<p>Most web frameworks today offer this <a href="http://www.sinatrarb.com/">Sinatra</a> approach, where you define routes and functions to handle them.</p>

<p>The <a href="http://www.template-toolkit.org/index.html">template system</a> is flexible and very powerful. Just embbed your html/css/js <a href="http://getbootstrap.com">Twitter Bootstrap</a> stuff and you have beauty. No time wasted with style cascading, user interface layout, etc.</p>

<h1 id="mongodb-and-keep-it-fast">MongoDB and keep it fast</h1>

<p>As I said: DO IT RIGHT NOW! So, set up a new database machine? Create schemas? No way! Get a ready to go mongo instance at (mongoHQ)[http://www.mongohq.com/home] and start coding right away.</p>

<p>The good part of it is no set up time, no administration time, and you can grow it as you go. Well, mongoHQ here was actually used for development and I don’t intend to keep it once moving to production</p>

<p>The benefits of mongo itself you can find around. What I want to highlight is the <a href="http://docs.mongodb.org/manual/aggregation/">aggregation</a> framework in conjuntion with perl. The perl hash syntax perfectly fits mongo documents:</p>

<figure class="highlight"><pre><code class="language-perl" data-lang="perl"><span></span>  <span class="k">my</span> <span class="nv">$result</span> <span class="o">=</span> <span class="n">mexecutions</span><span class="o">-&gt;</span><span class="n">aggregate</span><span class="p">([</span>
       <span class="p">{</span><span class="s">&#39;$match&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="s">&#39;alarm_enabled&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">}},</span>
       <span class="p">{</span><span class="s">&#39;$group&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="s">&#39;_id&#39;</span> <span class="o">=&gt;</span>  <span class="p">{</span><span class="s">&#39;status&#39;</span> <span class="o">=&gt;</span> <span class="s">&#39;$status&#39;</span><span class="p">,</span> <span class="s">&#39;wok_id&#39;</span><span class="o">=&gt;</span> <span class="s">&#39;$wok_id&#39;</span><span class="p">},</span>
                     <span class="s">&#39;count&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="s">&#39;$sum&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">}}}</span>
   <span class="p">]);</span></code></pre></figure>

<p>Using the aggregation framework you can easily break through any limitations when working without SQL statements with incredible performance.</p>

<h1 id="deploying-for-real">Deploying for real</h1>

<p>Well, your dancer application is able to process one request at time if you simply run it with <code>perl yourap.pl</code>. I need to handle much more than one request at a time. There are plenty options like ones available for ruby (<a href="http://rubygems.org/gems/unicorn">unicorn</a> or <a href="https://www.phusionpassenger.com/">passenger</a>). I went for <a href="http://uwsgi-docs.readthedocs.org/en/latest/index.html">uWSGI</a> inspite of many good options like <a href="http://search.cpan.org/~miyagawa/Twiggy-0.1023/lib/Twiggy.pm">Twiggy</a> or <a href="http://search.cpan.org/~miyagawa/Starman-0.1000/lib/Starman.pm">Startman</a>.</p>

<p>uWSGI provides a robust infrastructure and supports perl as well. But not all its features are available for perl like the <a href="http://uwsgi-docs.readthedocs.org/en/latest/Queue.html">queue framework</a> and <a href="http://uwsgi-docs.readthedocs.org/en/latest/WebCaching.html">caching stuff</a>. The speed of execution may compensate in most cases.</p>

<h1 id="wrapping-up">Wrapping Up</h1>

<p>I’m passionate about clojure, and this blog won’t change because this quick perl affair. But sincerely speaking, I haven’t met any clojure equivalent for web yet. Fast to start, fast to develop, fast to test and fast to deploy. Plus strong community, plugins, etc.</p>

<p>I’m not expert enough in perl, but it now has a nice place among my tools. I can imagne myself with front end perl stuff and crazy distributed async clojure in the back end.</p>

  </article>
</div>

<div class="share-buttons">
  <h6>Share on: </h6>
  <ul>
    <li>
      <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/blog/2013/09/20/ultrafast-web-development-with-perl-plus-bootstrap-plus-mongodb/" class="twitter btn" title="Share on Twitter"><i class="fa fa-twitter"></i><span> Twitter</span></a>
    </li>
    <li>
      <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/blog/2013/09/20/ultrafast-web-development-with-perl-plus-bootstrap-plus-mongodb/" class="facebook btn" title="Share on Facebook"><i class="fa fa-facebook"></i><span> Facebook</span></a>
    </li>
    <li>
      <a href="https://plus.google.com/share?url=http://localhost:4000/blog/2013/09/20/ultrafast-web-development-with-perl-plus-bootstrap-plus-mongodb/" class="google-plus btn" title="Share on Google Plus"><i class="fa fa-google-plus"></i><span> Google+</span></a>
    </li>
    <li>
      <a href="https://news.ycombinator.com/submitlink?u=http://localhost:4000/blog/2013/09/20/ultrafast-web-development-with-perl-plus-bootstrap-plus-mongodb/" class="hacker-news btn" title="Share on Hacker News"><i class="fa fa-hacker-news"></i><span> Hacker News</span></a>
    </li>
    <li>
      <a href="https://www.reddit.com/submit?url=http://localhost:4000/blog/2013/09/20/ultrafast-web-development-with-perl-plus-bootstrap-plus-mongodb/" class="reddit btn" title="Share on Reddit"><i class="fa fa-reddit"></i><span> Reddit</span></a>
    </li>
  </ul>
</div><!-- end share-buttons -->


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'paulosuzartblog';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>



        <footer>
  &copy; 2017 Paulo Suzart. Powered by <a href="http://jekyllrb.com/">Jekyll</a>, <a href="http://github.com/renyuanz/leonids/">leonids theme</a> made with <i class="fa fa-heart heart-icon"></i>
</footer>

      </div>
    </div>
  </div>
  <script type="text/javascript" src="http://localhost:4000/js/jquery-2.1.4.min.js"></script>
<script type="text/javascript" src="http://localhost:4000/js/main.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-26676810-1', 'auto');
  ga('send', 'pageview');
</script>


</body>
</html>
